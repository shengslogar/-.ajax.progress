(function(b){var a=b.ajax;b.ajax=function(e,c){var h;if(typeof e=="object"){h=e||{}}else{h=b.extend(c,{url:e})}var d;var g=[];var f=[];if(h.downloadProgress){g.push(h.downloadProgress)}if(h.progress){g.push(h.progress)}if(h.uploadProgress){f.push(h.uploadProgress)}h.xhr=function(){var i=b.ajaxSettings.xhr();i.addEventListener("progress",function(k){for(var j in g){g[j].apply(d,[k])}});i.upload.addEventListener("progress",function(k){for(var j in f){f[j].apply(d,[k])}});return i};d=a(h);d.downloadProgress=function(i){g.push(i);return this};d.progress=d.downloadProgress;d.uploadProgress=function(i){f.push(i);return this};return d}}(jQuery));